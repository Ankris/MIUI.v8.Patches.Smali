appfile <Settings.apk>;

# Change custom OTA Updater
replaceinfile "%smali%/com/android/settings/deviceinfo/MiuiMemory.smali" "instance fields" "instance fields \n    .field private mPartitionOrder:Landroid/preference/ListPreference;";
replaceinfile "%smali%/com/android/settings/deviceinfo/MiuiMemory.smali" "invoke-super {p0, p1}, Lcom/android/settings/deviceinfo/Memory;->onCreate(Landroid/os/Bundle;)V" "invoke-super {p0, p1}, Lcom/android/settings/deviceinfo/Memory;->onCreate(Landroid/os/Bundle;)V\n\n    const-string v0, "select_primary_storage"\n\n    invoke-virtual {p0, v0}, Lcom/android/settings/deviceinfo/MiuiMemory;->findPreference(Ljava/lang/CharSequence;)Landroid/preference/Preference;\n\n    move-result-object v0\n\n    check-cast v0, Landroid/preference/ListPreference;\n\n    iput-object v0, p0, Lcom/android/settings/deviceinfo/MiuiMemory;->mPatritionOrder:Landroid/preference/ListPreference;\n\n    iget-object v0, p0, Lcom/android/settings/deviceinfo/MiuiMemory;->mPatritionOrder:Landroid/preference/ListPreference;\n\n    invoke-virtual {v0, p0}, Landroid/preference/ListPreference;->setOnPreferenceChangeListener(Landroid/preference/Preference$OnPreferenceChangeListener;)V";
