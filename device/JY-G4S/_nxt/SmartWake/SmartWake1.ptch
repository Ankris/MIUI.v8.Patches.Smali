appfile <android.policy.jar>;

# Smart Wake
replaceinmethod "%smali%/com/android/internal/policy/impl/PhoneWindowManager.smali" 	".method public interceptKeyBeforeQueueing(Landroid/view/KeyEvent;IZ)I" 		"    sparse-switch v"         "    .line 1\n    if-nez p3, :smartwake_off\n\n    invoke-virtual/range {p1 .. p1}, Landroid/view/KeyEvent;->getAction()I\n    move-result v0\n    if-nez v0, :smartwake_off\n\n    .line 2\n    const-string v0, "persist.sys.off_gesture_switch"\n    const/4 v1, 0x0\n    invoke-static/range {v0 .. v1}, Landroid/os/SystemProperties;->getInt(Ljava/lang/String;I)I\n    move-result v0\n    if-eqz v0, :smartwake_off\n\n    .line 3\n    invoke-direct/range {p0 .. p0}, Lcom/android/internal/policy/impl/PhoneWindowManager;->isInCallScreenShowing()Z\n    move-result v0\n    if-nez v0, :smartwake_off\n\n    .line 4\n    const-string/jumbo v0, "WindowManager"\n    new-instance v1, Ljava/lang/StringBuilder;\n    invoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V\n    const-string/jumbo v2, "Pressed key code: "\n    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;\n    move-result-object v1\n    invoke-virtual/range {p1 .. p1}, Landroid/view/KeyEvent;->getKeyCode()I\n    move-result v2\n    invoke-virtual {v1, v2}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;\n    move-result-object v1\n    invoke-virtual {v1}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;\n    move-result-object v1\n    invoke-static {v0, v1}, Landroid/util/Log;->e(Ljava/lang/String;Ljava/lang/String;)I\n\n    .line 5\n    const/16 v0, 0x31\n    if-ne v2, v0, :gesture_c\n    const-string v0, "persist.sys.off_gesture_u"\n    const/16 v1, 0x0\n    invoke-static/range {v0 .. v1}, Landroid/os/SystemProperties;->getInt(Ljava/lang/String;I)I\n    move-result v0\n    if-eqz v0, :smartwake_off\n    const/16 v11, 0x1				\n    goto :gesture_done\n\n    .line 6\n    :gesture_c\n    const/16 v0, 0x1f\n    if-ne v2, v0, :gesture_o\n    const-string v0, "persist.sys.off_gesture_c"\n    const/16 v1, 0x0\n    invoke-static/range {v0 .. v1}, Landroid/os/SystemProperties;->getInt(Ljava/lang/String;I)I\n    move-result v0\n    if-eqz v0, :smartwake_off\n    move-object/from16 v0, p0\n    iget-object v0, v0, Lcom/android/internal/policy/impl/PhoneWindowManager;->mKeyguardDelegate:Lcom/android/internal/policy/impl/keyguard/KeyguardServiceDelegate;\n    invoke-virtual {v0}, Lcom/android/internal/policy/impl/keyguard/KeyguardServiceDelegate;->dismiss()V\n    invoke-static {}, Ljava/lang/Runtime;->getRuntime()Ljava/lang/Runtime;\n    move-result-object v0\n    const-string v1, "am start -a android.media.action.STILL_IMAGE_CAMERA"\n    invoke-virtual {v0, v1}, Ljava/lang/Runtime;->exec(Ljava/lang/String;)Ljava/lang/Process;\n    const/16 v11, 0x1				\n    goto :gesture_done\n\n    .line 7\n    :gesture_o\n    const/16 v0, 0x2b\n    if-ne v2, v0, :gesture_e\n    const-string v0, "persist.sys.off_gesture_o"\n    const/16 v1, 0x0\n    invoke-static/range {v0 .. v1}, Landroid/os/SystemProperties;->getInt(Ljava/lang/String;I)I\n    move-result v0\n    if-eqz v0, :smartwake_off\n    move-object/from16 v0, p0\n    iget-object v0, v0, Lcom/android/internal/policy/impl/PhoneWindowManager;->mKeyguardDelegate:Lcom/android/internal/policy/impl/keyguard/KeyguardServiceDelegate;\n    invoke-virtual {v0}, Lcom/android/internal/policy/impl/keyguard/KeyguardServiceDelegate;->dismiss()V\n    invoke-static {}, Ljava/lang/Runtime;->getRuntime()Ljava/lang/Runtime;\n    move-result-object v0\n    const-string v3, "am start -a android.intent.action.DIAL"\n    invoke-virtual {v0, v3}, Ljava/lang/Runtime;->exec(Ljava/lang/String;)Ljava/lang/Process;\n    const/16 v11, 0x1				\n    goto :gesture_done\n\n    .line 8\n    :gesture_e\n    const/16 v0, 0x21\n    if-ne v2, v0, :gesture_up\n    const-string v0, "persist.sys.off_gesture_e"\n    const/16 v1, 0x0\n    invoke-static/range {v0 .. v1}, Landroid/os/SystemProperties;->getInt(Ljava/lang/String;I)I\n    move-result v0\n    if-eqz v0, :smartwake_off\n    move-object/from16 v0, p0\n    iget-object v0, v0, Lcom/android/internal/policy/impl/PhoneWindowManager;->mKeyguardDelegate:Lcom/android/internal/policy/impl/keyguard/KeyguardServiceDelegate;\n    invoke-virtual {v0}, Lcom/android/internal/policy/impl/keyguard/KeyguardServiceDelegate;->dismiss()V\n    invoke-static {}, Ljava/lang/Runtime;->getRuntime()Ljava/lang/Runtime;\n    move-result-object v0\n    const-string v3, "am start -a android.speech.action.WEB_SEARCH -c android.intent.category.DEFAULT"\n    invoke-virtual {v0, v3}, Ljava/lang/Runtime;->exec(Ljava/lang/String;)Ljava/lang/Process;\n    const/16 v11, 0x1				\n    goto :gesture_done\n\n    .line 9\n    :gesture_up\n    const/16 v0, 0x13\n    if-ne v2, v0, :gesture_down\n    const-string v0, "persist.sys.off_gesture_up"\n    const/16 v1, 0x0\n    invoke-static/range {v0 .. v1}, Landroid/os/SystemProperties;->getInt(Ljava/lang/String;I)I\n    move-result v0\n    if-eqz v0, :smartwake_off\n    move-object/from16 v0, p0\n    iget-object v0, v0, Lcom/android/internal/policy/impl/PhoneWindowManager;->mKeyguardDelegate:Lcom/android/internal/policy/impl/keyguard/KeyguardServiceDelegate;\n    invoke-virtual {v0}, Lcom/android/internal/policy/impl/keyguard/KeyguardServiceDelegate;->dismiss()V\n    const/16 v11, 0x1				\n    goto :gesture_done\n\n    .line 10\n    :gesture_down\n    const/16 v0, 0x14\n    if-ne v2, v0, :gesture_left\n    const-string v0, "persist.sys.off_gesture_down"\n    const/16 v1, 0x0\n    invoke-static/range {v0 .. v1}, Landroid/os/SystemProperties;->getInt(Ljava/lang/String;I)I\n    move-result v0\n    if-eqz v0, :smartwake_off\n    move-object/from16 v0, p0\n    const/16 v1, 0x55\n    invoke-virtual {v0, v1}, Lcom/android/internal/policy/impl/PhoneWindowManager;->sendMediaButtonEvent(I)V\n    const/16 v11, 0x0				\n    goto :gesture_done\n\n    .line 11\n    :gesture_left\n    const/16 v0, 0x15\n    if-ne v2, v0, :gesture_right\n    const-string v0, "persist.sys.off_gesture_left"\n    const/16 v1, 0x0\n    invoke-static/range {v0 .. v1}, Landroid/os/SystemProperties;->getInt(Ljava/lang/String;I)I\n    move-result v0\n    if-eqz v0, :smartwake_off\n\n    invoke-direct/range {p0 .. p0}, Lcom/android/internal/policy/impl/PhoneWindowManager;->isMusicActive()Z\n    move-result v1\n    if-eqz v1, :smartwake_off\n    move-object/from16 v0, p0\n    const/16 v1, 0x58\n    invoke-virtual {v0, v1}, Lcom/android/internal/policy/impl/PhoneWindowManager;->sendMediaButtonEvent(I)V\n    const/16 v11, 0x0				\n    goto :gesture_done\n\n    .line 12\n    :gesture_right\n    const/16 v0, 0x16\n    if-ne v2, v0, :smartwake_off\n    const-string v0, "persist.sys.off_gesture_right"\n    const/16 v1, 0x0\n    invoke-static/range {v0 .. v1}, Landroid/os/SystemProperties;->getInt(Ljava/lang/String;I)I\n    move-result v0\n    if-eqz v0, :smartwake_off\n    invoke-direct/range {p0 .. p0}, Lcom/android/internal/policy/impl/PhoneWindowManager;->isMusicActive()Z\n    move-result v1\n    if-eqz v1, :smartwake_off\n    move-object/from16 v0, p0\n    const/16 v1, 0x57\n    invoke-virtual {v0, v1}, Lcom/android/internal/policy/impl/PhoneWindowManager;->sendMediaButtonEvent(I)V\n    const/16 v11, 0x0				\n\n    :gesture_done\n\n    move-object/from16 v1, p0\n    iget-object v1, v1, Lcom/android/internal/policy/impl/PhoneWindowManager;->mContext:Landroid/content/Context;\n    const-string v2, "vibrator"\n    invoke-virtual/range {v1 .. v2}, Landroid/content/Context;->getSystemService(Ljava/lang/String;)Ljava/lang/Object;\n    move-result-object v0\n    check-cast v0, Landroid/os/Vibrator;\n    .local v0\n    const-wide/16 v1, 0x64\n    invoke-virtual/range {v0 .. v2}, Landroid/os/Vibrator;->vibrate(J)V\n\n    goto :goto_6  					\n\n    :smartwake_off\n    sparse-switch v";

# Add sendMediaButtonEvent method
methodreplace "%smali%/com/android/internal/policy/impl/PhoneWindowManager.smali" 	".method public setTouchExplorationEnabled(Z)V"              				"%here%/methods/sendMediaButtonEvent.m";
