appfile <android.policy.jar>;

# Add volume skip track
replaceinfile "%smali%/com/android/internal/policy/impl/PhoneWindowManager.smali" 			"instance fields" 												"instance fields \n.field mVolumeLongPressed:Z \n\n.field mVolumeKeyCode:I \n\n.field mVolumeLongPressTimeoutRunnable:Ljava/lang/Runnable;";
replaceinmethod "%smali%/com/android/internal/policy/impl/PhoneWindowManager.smali" 		".method public constructor <init>()V"									"return-void"				"new-instance v0, Lcom/android/internal/policy/impl/PhoneWindowManager$VolumeLongPress;\n\n    invoke-direct {v0, p0}, Lcom/android/internal/policy/impl/PhoneWindowManager$VolumeLongPress;-><init>(Lcom/android/internal/policy/impl/PhoneWindowManager;)V\n\n    iput-object v0, p0, Lcom/android/internal/policy/impl/PhoneWindowManager;->mVolumeLongPressTimeoutRunnable:Ljava/lang/Runnable;\n\n    return-void";
replaceinmethod "%smali%/com/android/internal/policy/impl/PhoneWindowManager.smali" 		".method public interceptKeyBeforeQueueing(Landroid/view/KeyEvent;IZ)I"		":sswitch_1\n    const/16"		":sswitch_1\n    const-string/jumbo v1, "persist.sys.volume.skip"\n    const/4 v0, 0x0\n    invoke-static {v1, v0}, Landroid/os/SystemProperties;->getBoolean(Ljava/lang/String;Z)Z\n    move-result v0\n    if-eqz v0, :cond_50\n    if-nez p3, :cond_50\n    move-object/from16 v0, p0\n    invoke-virtual {v0}, Lcom/android/internal/policy/impl/PhoneWindowManager;->isMusicActive()Z\n    move-result v1\n    if-nez v1, :cond_40\n    invoke-virtual {v0}, Lcom/android/internal/policy/impl/PhoneWindowManager;->isFmActive()Z\n    move-result v1\n    if-nez v1, :cond_40\n    goto :goto_50\n:cond_40\n    move-object/from16 v1, p1\n    invoke-virtual {v0, v1}, Lcom/android/internal/policy/impl/PhoneWindowManager;->HandleVolumeLongPress(Landroid/view/KeyEvent;)Z\n    move-result v0\n    if-nez v0, :cond_50\n    const/16 v16, 0x0\n    goto :goto_0\n:cond_50\n:goto_50\n    const/16";
methodreplace "%smali%/com/android/internal/policy/impl/PhoneWindowManager.smali" 		".method public dismissKeyguardLw()V" 								"%here%/android.policy.jar/VolumeSkipTrack.m";
copyfile "%here%/android.policy.jar/PhoneWindowManager$VolumeLongPress.smali" 			"%smali%/com/android/internal/policy/impl/PhoneWindowManager$VolumeLongPress.smali";
